"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function requestAnimationFrameLong(t){requestAnimationFrame(function(){requestAnimationFrame(t)})}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}();console.log("main2");var Strips=function(){function t(){_classCallCheck(this,t),this.color="#C62828",this.content=document.querySelector(".content"),this.strips=this.content.querySelectorAll(".color-strip"),this.animating=!1,this._addEventListeners=this._addEventListeners.bind(this),this._setTransitionListeners=this._setTransitionListeners.bind(this),this._shadeColor=this._shadeColor.bind(this),this.colorize=this.colorize.bind(this),this._addEventListeners(),this.colorize()}return _createClass(t,[{key:"_addEventListeners",value:function(){var t=this;this._setTransitionListeners(),this.content.addEventListener("click",function(e){if(!t.animating){var n=e.target;n.classList.contains("layer-2")&&!function(){var e=n.parentNode;e.querySelector(".layer-0").style.display="flex",e.querySelector(".layer-1").style.display="flex",t.animating=!0,requestAnimationFrameLong(function(){if(e.classList.contains("wriggle"))e.classList.remove("wriggle");else{var n=t.content.querySelector(".wriggle");n&&n.classList.remove("wriggle"),e.classList.add("wriggle")}})}()}})}},{key:"_setTransitionListeners",value:function(){for(var t=this,e=0,n=this.strips.length;e<n;e++)this.strips[e].querySelector(".segment-dark").addEventListener("transitionend",function(e){t.animating=!1;var n=e.target.parentNode.parentNode;n.classList.contains("wriggle")||(n.querySelector(".layer-0").style.display="none",n.querySelector(".layer-1").style.display="none"),console.log(e)})}},{key:"_shadeColor",value:function(t,e){var n=parseInt(t.substring(1,3),16),s=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);n=parseInt(n*(100+e)/100),s=parseInt(s*(100+e)/100),i=parseInt(i*(100+e)/100),n=n<255?n:255,s=s<255?s:255,i=i<255?i:255;var r=1==n.toString(16).length?"0"+n.toString(16):n.toString(16),o=1==s.toString(16).length?"0"+s.toString(16):s.toString(16),a=1==i.toString(16).length?"0"+i.toString(16):i.toString(16);return"#"+r+o+a}},{key:"colorize",value:function(t){var e=0;t=t||this.color;for(var n=0,s=this.strips.length;n<s;n++){for(var i=this._shadeColor(t,e),r=this.strips[n].querySelectorAll(".segment"),o=0,a=r.length;o<a;o++)r[o].style.background=i,1===o&&(r[o].style.background=this._shadeColor(i,-25));e-=15}}}]),t}(),strips=new Strips;