"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function requestAnimationFrameLong(t){requestAnimationFrame(function(){requestAnimationFrame(t)})}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();console.log("main2");var Strips=function(){function t(){_classCallCheck(this,t),this.color="#C62828",this.colorPicker=document.querySelector(".toolbar__color-picker"),this.colorIndicator=this.colorPicker.querySelector(".color-picker__color"),this.content=document.querySelector(".content"),this.strips=this.content.querySelectorAll(".color-strip"),this.animating=!1,this._addEventListeners=this._addEventListeners.bind(this),this._setTransitionListeners=this._setTransitionListeners.bind(this),this._shadeColor=this._shadeColor.bind(this),this.colorize=this.colorize.bind(this),this._addEventListeners(),this.colorize()}return _createClass(t,[{key:"_addEventListeners",value:function(){var t=this;this.colorPicker.addEventListener("click",function(){"#C62828"===t.color?(t.color="#2196F3",t.colorIndicator.style.background="#C62828"):(t.color="#C62828",t.colorIndicator.style.background="#2196F3"),t.colorize()}),this._setTransitionListeners(),this.content.addEventListener("click",function(e){if(!t.animating){var r=e.target;r.classList.contains("layer-2")&&!function(){var e=r.parentNode;e.querySelector(".layer-0").style.display="flex",e.querySelector(".layer-1").style.display="flex",t.animating=!0,requestAnimationFrameLong(function(){if(e.classList.contains("wriggle"))e.classList.remove("wriggle");else{var r=t.content.querySelector(".wriggle");r&&r.classList.remove("wriggle"),e.classList.add("wriggle")}})}()}})}},{key:"_setTransitionListeners",value:function(){for(var t=this,e=0,r=this.strips.length;e<r;e++)this.strips[e].querySelector(".segment-dark").addEventListener("transitionend",function(e){t.animating=!1;var r=e.target.parentNode.parentNode;r.classList.contains("wriggle")||(r.querySelector(".layer-0").style.display="none",r.querySelector(".layer-1").style.display="none")})}},{key:"_shadeColor",value:function(t,e){var r=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);r=parseInt(r*(100+e)/100),n=parseInt(n*(100+e)/100),i=parseInt(i*(100+e)/100),r=r<255?r:255,n=n<255?n:255,i=i<255?i:255;var s=1==r.toString(16).length?"0"+r.toString(16):r.toString(16),o=1==n.toString(16).length?"0"+n.toString(16):n.toString(16),a=1==i.toString(16).length?"0"+i.toString(16):i.toString(16);return"#"+s+o+a}},{key:"colorize",value:function(t){var e=this,r=0;t=t||this.color;for(var n=function(n,i){setTimeout(function(e){var r=this._shadeColor(t,e),i=this.strips[n].querySelectorAll(".segment");this.strips[n].querySelector(".layer-0").textContent=r,this.strips[n].style.color=r;for(var s=0,o=i.length;s<o;s++)i[s].style.background=r,1===s&&(i[s].style.background=this._shadeColor(r,-25))}.bind(e,r),100*n),r-=15},i=0,s=this.strips.length;i<s;i++)n(i,s)}}]),t}(),strips=new Strips;